<!doctype html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Seb PlanlayÄ±cÄ± (Firebase Senkron)</title>
<style>
body {margin:0;background:#0f172a;color:#e2e8f0;font-family:Arial,sans-serif;}
header{padding:20px;display:flex;justify-content:space-between;align-items:center;background:#1e293b;position:sticky;top:0;}
h1{margin:0;font-size:20px;}
.view-switch button{padding:8px 14px;background:#334155;border:none;border-radius:6px;color:#e2e8f0;cursor:pointer;}
.view-switch button.active{background:#06b6d4;}
.week-grid,.month-grid{display:none;padding:20px;gap:20px;}
.week-grid.active,.month-grid.active{display:grid;}
.week-grid{grid-template-columns:repeat(7,1fr);}
.month-grid{grid-template-columns:repeat(4,1fr);}
.day{background:#1e293b;padding:12px;border-radius:10px;min-height:200px;}
.day h3{margin-top:0;font-size:17px;}
.task{background:#0f172a;border:1px solid #334155;border-radius:6px;padding:6px;margin-top:8px;display:flex;justify-content:space-between;align-items:center;}
.task label{cursor:pointer;font-size:14px;}
.add-task{margin-top:8px;width:100%;padding:6px;border-radius:6px;border:none;background:#06b6d4;color:white;cursor:pointer;}
.payment{transform:scale(1.2);}
</style>
</head>
<body>

<header>
<h1>SEB â€” PlanlayÄ±cÄ±</h1>
<div class="view-switch">
<button id="weekBtn" class="active">HaftalÄ±k</button>
<button id="monthBtn">AylÄ±k</button>
</div>
</header>

<div class="week-grid active" id="weekView"></div>
<div class="month-grid" id="monthView"></div>

<!-- Firebase SDK (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // ðŸ”¹ Buraya kendi Firebase config'ini yapÄ±ÅŸtÄ±r
  const firebaseConfig = {
    apiKey: "AIzaSyA2XK8Tj5fI7HB8nfgbRZbmsq0ImXDB7g4",
    authDomain: "cekim-takvimi.firebaseapp.com",
    databaseURL: "https://cekim-takvimi-default-rtdb.firebaseio.com", // ðŸ”¹ Kendi DB URL'in buraya
    projectId: "cekim-takvimi",
    storageBucket: "cekim-takvimi.appspot.com",
    messagingSenderId: "93881896570",
    appId: "1:93881896570:web:ca8c2deb99f89bc9f275c3",
    measurementId: "G-N70DDF5NB8"
  };

  // Firebase baÅŸlat
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  const days=["Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi","Pazar"];
  const weeks=["1. Hafta","2. Hafta","3. Hafta","4. Hafta"];

  let data = {};

  function loadData(callback){
    database.ref('sebPlanner').get().then(snapshot => {
      if(snapshot.exists()){
        callback(snapshot.val());
      } else {
        callback({});
      }
    });
  }

  function saveData(d){
    database.ref('sebPlanner').set(d);
  }

  function renderWeekView(){
    const container=document.getElementById("weekView");
    container.innerHTML="";
    days.forEach(day=>{
      const box=document.createElement("div");
      box.className="day";
      box.innerHTML=`<h3>${day}</h3>`;
      const tasks=data[day]||[];
      tasks.forEach((t,i)=>{
        const el=document.createElement("div");
        el.className="task";
        el.innerHTML=`<label>${t.text}</label><input type="checkbox" class="payment" ${t.paid?"checked":""}/>`;
        el.querySelector("input").onchange = ()=>{
          data[day][i].paid = !data[day][i].paid;
          saveData(data);
        };
        box.appendChild(el);
      });

      const btn=document.createElement("button");
      btn.className="add-task";
      btn.textContent="+ Ä°ÅŸ Ekle";
      btn.onclick = ()=>{
        const text = prompt("Ä°ÅŸ aÃ§Ä±klamasÄ±:");
        if(text){
          if(!data[day]) data[day]=[];
          data[day].push({text, paid:false});
          saveData(data);
          renderWeekView();
        }
      };

      box.appendChild(btn);
      container.appendChild(box);
    });
  }

  function renderMonthView(){
    const container=document.getElementById("monthView");
    container.innerHTML="";
    weeks.forEach(week=>{
      const box=document.createElement("div");
      box.className="day";
      box.innerHTML=`<h3>${week}</h3>`;
      const tasks=data[week]||[];
      tasks.forEach((t,i)=>{
        const el=document.createElement("div");
        el.className="task";
        el.innerHTML=`<label>${t.text}</label><input type="checkbox" class="payment" ${t.paid?"checked":""}/>`;
        el.querySelector("input").onchange = ()=>{
          data[week][i].paid = !data[week][i].paid;
          saveData(data);
        };
        box.appendChild(el);
      });

      const btn=document.createElement("button");
      btn.className="add-task";
      btn.textContent="+ Ä°ÅŸ Ekle";
      btn.onclick = ()=>{
        const text = prompt("Ä°ÅŸ aÃ§Ä±klamasÄ±:");
        if(text){
          if(!data[week]) data[week]=[];
          data[week].push({text, paid:false});
          saveData(data);
          renderMonthView();
        }
      };

      box.appendChild(btn);
      container.appendChild(box);
    });
  }

  // Veriyi yÃ¼kle ve render et
  loadData(d=>{
    data = d;
    renderWeekView();
    renderMonthView();
  });

  const weekBtn=document.getElementById("weekBtn");
  const monthBtn=document.getElementById("monthBtn");
  weekBtn.onclick=()=>{
    document.getElementById("weekView").classList.add("active");
    document.getElementById("monthView").classList.remove("active");
    weekBtn.classList.add("active");
    monthBtn.classList.remove("active");
  };
  monthBtn.onclick=()=>{
    document.getElementById("monthView").classList.add("active");
    document.getElementById("weekView").classList.remove("active");
    monthBtn.classList.add("active");
    weekBtn.classList.remove("active");
  };
</script>

</body>
</html>
